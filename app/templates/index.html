<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/3d_plot.css">

    <title>Movement Coach</title>
</head>

<body>
    <div id="loader"></div>
    <div id="loading_overlay"></div>

    <div id="media" style="width: 100%; height: 95vh">
        <audio id="audio" autoplay="true"></audio>
        <div id="leftDiv">
            <div id="leftVideo">
                <video id="masterVideo" autoplay="true" playsinline="true"
                       style="float: left; width: 50%; height: 95vh; margin: auto; display: flex; display: none" controls>
                </video>
            </div>
            <div id="leftPlot" style="float: left; width: 50%; height: 95vh; margin: auto; background-color: #ffffff; ">
                <canvas id="2d-canvas"></canvas>
            </div>
        </div>
        <div id="rightDiv">
            <div id="rightVideo">
                <video id="video" autoplay="true" playsinline="true"
                       style="width: 50%; height: 95vh; margin: auto; display: flex; display: none" controls>
                </video>
            </div>
            <div id="rightPlot" style="width: 50%; height: 95vh; margin: auto; ">
                <figure class="highcharts-figure">
                    <div id="container"></div>
                    <p class="highcharts-description">
                        Chart demonstrating a 3D scatter plot, where the chart can be rotated to
                        inspect points from different angles. Each point has an x, y, and z
                        coordinate value.
                    </p>
                </figure>
            </div>
        </div>
    </div>

    <div id="overlay" class="rounded-top">
        <div class="custom-control form-group">
            <h2>Options</h2>
        </div>
        <div class="option form-group">
            <div class="custom-control" style="margin-right: 15px;">
                <form action="/video" method="POST" enctype="multipart/form-data" id="video_form">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <input type="submit" class="btn btn-primary" value="Hochladen">
                        </div>
                        <div class="custom-file">
                            <input id="videoUpload" type="file" class="custom-file-input" name="video"
                                accept="video/mp4">
                            <label class="custom-file-label" for="videoUpload">Video</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="option form-group">
            <div class="custom-control">
                <div class="form-inline">
                    <input id="use-datachannel" checked="checked" type="checkbox" />
                    <label for="use-datachannel">Use datachannel</label>&nbsp;
                    <select id="datachannel-parameters" class="form-control" style="width: 30%">
                        <option value='{"ordered": true}'>Ordered, reliable</option>
                        <option value='{"ordered": false, "maxRetransmits": 0}'>Unordered, no retransmissions</option>
                        <option value='{"ordered": false, "maxPacketLifetime": 500}'>Unordered, 500ms lifetime</option>
                    </select>
                </div>

            </div>

            <div class="option form-group">
                <div class="custom-control">
                    <div class="form-inline">
                        <input id="use-audio" type="checkbox" />
                        <label for="use-audio">Use audio</label>&nbsp;
                        <select id="audio-codec" class="form-control" style="width: 30%">
                            <option value="default" selected>Default codecs</option>
                            <option value="opus/48000/2">Opus</option>
                            <option value="PCMU/8000">PCMU</option>
                            <option value="PCMA/8000">PCMA</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option form-group">
                <div class="custom-control">
                    <div class="form-inline">
                        <input id="use-video" checked="checked" type="checkbox" />
                        <label for="use-video">Use video</label>&nbsp;
                        <select id="video-resolution" class="form-control" style="width: 30%">
                            <option value="" selected>Default resolution</option>
                            <option value="320x240">320x240</option>
                            <option value="640x480">640x480</option>
                            <option value="960x540">960x540</option>
                            <option value="1280x720">1280x720</option>
                        </select>&nbsp;
                        <select id="video-transform" class="form-control" style="width: 30%">
                            <option value="none" selected>No transform</option>
                            <option value="edges">Edge detection</option>
                            <option value="cartoon">Cartoon effect</option>
                            <option value="rotate">Rotate</option>
                        </select>&nbsp;
                        <select id="video-codec" class="form-control" style="width: 30%">
                            <option value="default" selected>Default codecs</option>
                            <option value="VP8/90000">VP8</option>
                            <option value="H264/90000">H264</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option form-group">
                <div class="custom-control custom-checkbox">
                    <input id="use-stun" type="checkbox" />
                    <label for="use-stun">Use STUN server</label>
                </div>
            </div>

            <div class="custom-control form-group" style="text-align: center">
                <button id="start" onclick="start()" class="btn btn-info" style="width: 40%">Start</button>
                <button id="stop" style="display: none; width: 40%" onclick="stop()" class="btn btn-info">Stop</button>
                <button id="switch" class="btn btn-info" style="width: 40%">Switch</button>
            </div>

            <div class="custom-control form-group" style="text-align: center">
                <a href="#data" class="btn btn-info" data-toggle="collapse" style="width: 81%">Data</a>
            </div>

            <div class="custom-control form-group">
                <div id="data" class="collapse">
                    <h2>Data channel</h2>
                    <pre id="data-channel" style="height: 200px;"></pre>
                </div>
            </div>

            <div style="height: 50px"></div>

            <a href="#debug" class="btn btn-info" data-toggle="collapse" style="align: center; display: none">degubg</a>
            <div id="debug" class="collapse">
                <h2>State</h2>
                ICE gathering state: <span id="ice-gathering-state"></span>
                ICE connection state: <span id="ice-connection-state"></span>
                Signaling state: <span id="signaling-state"></span>
                <h3>Offer</h3>
                <pre id="offer-sdp"></pre>

                <h3>Answer</h3>
                <pre id="answer-sdp"></pre>
            </div>
        </div>
    </div>
    <a id="overlay-btn" class="btn btn-primary" style="align: center;">Optionen verbergen</a>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-3d.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <script src="static/js/web_rtc.js"></script>
    <script src="static/js/3d_plot.js"></script>
    <script src="static/js/2d_plot.js"></script>
    <script src="static/js/main.js"></script>
</body>

</html>